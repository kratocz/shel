# Shell Handy Examples for Linux (SHEL)

A bunch of Markdown and script files with handy code snippets for Linux shell users.

* ✓ References to trusted sources
* ✓ Open to issue reports, feature requests and merge requests
* ✓ Use it in your company for commercial use
* ✓ AI friendly structured
* ✓ Free forever

## Content

* [general shell cheatsheets](categories/general_shell_cheatsheets.md)

### TODO (sorry, not yet)

* text manipulations … `head`, `sed`, `awk`, `sort`, …
* bash … `while read`, `set`, `test` …
* one running instance … `flock`, `lockfile`, `pidof`, …
* directory synchronizations … `rsync`, `cp`, `btrfs`, `rclone`, …
* directory browsers … `mc`, `which`, `find`, …
* directory space usage … `du`, `ncdu`, `btdu`, …
* directory … `du`, `ncdu`, `btdu`, …
* (un)compress … `tar`, `gzip`, `find ... -exec gzip`, …
* partitions … `cfdisk`, `sfdisk`, `fdisk`, …
* partition encryption … `cryptsetup luksFormat`, `cryptsetup luksOpen`, `cryptsetup luksChangeKey`, …
* block devices … `lsblk`, `blkid`, `dd`, `mountpoint`, `findmnt`, …
* LVM … `pvs`, `vgs`, `lvs`, …
* fstab … `swap`, `ext4`, `btrfs`, …
* systemd units … `systemctl`, `journalctl`, `*.service`, …
* remote access … `ssh`, `nxserver`, …
* text screen multiplexers … `screen`, `tmux`, …
* text editors … `vim`, `nano`, `mcedit`, …
* Btrfs … `btrfs subvolume`, `btrfs filesystem`,  `btrfs property set`, `btrfs send+receive`, …
* ZFS … `zfs create`, `zfs send+receive`, …
* file encryption … `gpg`, `ecryptfs-setup-private`, …
* RAID … `/proc/mdstat`, `mdadm`, …
* regular expressions … `egrep`, …
* DynamicMapper (DM) … `losetup`, `dmsetup`, …
* network configuration … `ip address`, `iptables`, `iptables-save`, `ufw` …
* network monitoring … `tcpdump`, `tshark`, `nethogs`, `netcat`, `ss`, …
* WireGuard (VPN) … `wg`, `wg-quick`, `/etc/wireguard`, …
* script best-practices … `bash`, `python3`, …
* system boot rescue … `mount --rbind`, `chroot`, `update-grub`, `update-initramfs -u`, `grub-install`, …

## Authors favorite examples

### First lines of the BASH script

```shell
#!/usr/bin/env bash
set -euo pipefail
```

Explanation:
* `#!/usr/bin/env bash` … use also for `sh`, `php`, `python3`, …; makes the script compatible with strange Linuxes, BSD, macOS, …
* `set -e` … exit on error (any non-zero command return code)
* `set -u` … treat unset variables as an error (typos prevention)
* `set -o pipefail` … fail on first error in pipelines (e.g. `cat non-existing-file | head -n 2 | tail -n 1` will fail)

References:
* https://unix.stackexchange.com/questions/240749/bash-script-best-practice

### Rescue Linux boot from a live Linux

```shell
mkdir /target
mount </dev/...> /target
cd /target
mount -t proc /proc proc
mount --rbind /sys sys
mount --rbind /dev dev
chroot .
```

You can download this script and place it to the root directory of your OS to make this easy in the future: [rescue-mount](scripts/rescue-mount)


References:
* https://superuser.com/questions/165116/mount-dev-proc-sys-in-a-chroot-environment

